{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mi equipo</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/equipo.css' %}"/>
    <script src="{% static 'js/equipo.js' %}"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.3.1/dist/chart.min.js"></script>

</head>

<body>
<!-- Side navigation -->
<div class="sidenav">
    {% if user.is_authenticated %}
        <span id="saludo">Hola, {{ request.user }}</span>
        <span><a id="logout" href="{% url 'logout' %}">Logout</a></span>
    {% else %}
        <a href="{% url 'login' %}">Login</a>
        <a href="{% url 'register' %}">Registrarse</a>
    {% endif %}
    <hr style="width:100%;text-align:left;margin-left:0;border: 1px solid #818181">
    <a href="{% url 'principal' %}">Home</a>
    <a href="{% url 'clasificacion' %}">Clasificación</a>
    <a href="{% url 'mercado' %}">Mercado</a>
    {% if user.is_authenticated %}
        <a href="{% url 'equipo' %}">Mi equipo</a>
    {% endif %}
</div>  

<input type="hidden" id="myVar" name="variable" value="{{ datos  }}">

<h1>{{ equipo.0 }}</h1>

<h2>Presupuesto: {{ equipo.1 }} €</h2>

<h3>Jugadores</h3>

<table style="color:black;">
    <thead>
    <tr>
        <th scope="col">Nombre</th>
        <th scope="col">Equipo</th>
        <th scope="col">Edad</th>
        <th scope="col">Altura</th>
        <th scope="col">Precio</th>
    </tr>
    </thead>
    <tbody>

    {% for jugador in jugadores %}
        <tr onclick="miFuncion(this)">
            {% for dato in jugador %}
                <td>{{ dato }}</td>
            {% endfor %}
        </tr>
    {% endfor %}

    </tbody>
</table>

<div>
    <form action="{% url 'addJugador' %}">
        <button id="addJugador">Comprar jugador</button>
    </form>
    <form action="{% url 'delJugador' %}">
        <button id="delJugador">Vender jugador</button>
    </form>
</div>


<h3>Puntuación por jornada</h3>

<div>
    
    <canvas id="jornadasChart" width="1500" height="600"></canvas>

</div>

<h3>Estadisticas generales</h3>

<label for="options">Seleccione una opcion:</label>

<select name="options" id="options" onchange="cambiarGrafico(this)">
  <option value="goles">Goles</option>
  <option value="asistencias">Asistencias</option>
  <option value="tarjetas">Tarjetas</option>
  <option value="resultados">Resultados</option>
  <option value="minutos">Minutos de juego</option>
  <option value="ausencias">Ausencias</option>
</select>


<div>
    
    <canvas id="myChart" width="1500" height="600"></canvas>

</div>

<!-- The Modal -->
<div id="myModal" class="modal" style="color:black;text-align: center;">

    <!-- Modal content -->
    <div class="modal-content">
        <span class="close">&times;</span>
        <table>
            <tr>
            <tr>
                <h2 id="jugNombre"></h2>
                <img id="jugFoto" src="">
            </tr>
            </tr>
            <tr>
                <td>
                    <p id="jugGoles"></p></br>
                    <p id="jugAsist">Asistencias: 0</p></br>
                    <p id="jugAma">Amarillas: 3</p></br>
                    <p id="jugSegAma">Segundas Amarillas: 0</p></br>
                    <p id="jugRojas">Rojas: 0</p></br>
                    <p id="jugMin">Minutos totales de juego: 1276</p></br>
                    <p id="jugVic">Victorias: 10</p></br>
                    <p id="jugDer">Derrotas: 2</p></br>
                    <p id="jugEmp">Empates: 3</p></br>
                    <p id="jugAus">Partidos ausente: 13</p></br>
                </td>
            </tr>
        </table>
    </div>

</div>

</body>

<script>

    var jornadas = []

    var numeros = [];
    for (var i = 1; i <= 38; i++) {
        numeros.push(i);
    }


    {% for jornada in semana %}
        jornadas.push(parseInt("{{ jornada }}"))
    {% endfor %}


    var ctx = document.getElementById('jornadasChart').getContext('2d');


    var jornadasChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: numeros,
        datasets: [{
            label: 'puntos',
            data: jornadas,
            backgroundColor: [
                'rgba(26, 188, 156,1)'
            ],
            borderColor: [
                'rgba(26, 188, 156,1.0)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
    });

</script>
</html>